#%Module1.0#####################################################################
##
## ANSYS 18.2 module file
##
#  By B.D Hughes on November 2017
################################################################################

## Module file logging
source /usr/local/etc/module_logging.tcl

proc ModulesHelp { } {
    global vers
    puts stderr "    Makes ANSYS Version $vers available for use"
}

# Module variables
set vers      18.2
set shortvers 182
set prefix    /usr/local/packages6/ansys$shortvers/ansys_inc/v$shortvers

module-whatis   "Makes ANSYS v$vers available"

# Set env vars 
setenv ANSWBCOMMAND $prefix/Framework/bin/Linux64/runwb2
setenv ANSYSROOT    $prefix
setenv ANSYSVER     $shortvers
setenv FLUENT_INC   $prefix/fluent
setenv ICEM_ACN     $prefix/icemcfd/linux64_amd

# Paths to Ansys executables
prepend-path PATH $prefix/Electronics/Linux64
prepend-path PATH $prefix/polyflow/bin
prepend-path PATH $prefix/TurboGrid/bin/linux-amd64
prepend-path PATH $prefix/TurboGrid/bin
prepend-path PATH $prefix/icemcfd/linux64_amd/bin
prepend-path PATH $prefix/Icepak/bin
prepend-path PATH $prefix/CFD-Post/bin/linux-amd64
prepend-path PATH $prefix/CFD-Post/bin
prepend-path PATH $prefix/CFX/bin/linux-amd64
prepend-path PATH $prefix/CFX/bin
prepend-path PATH $prefix/fluent/bin
prepend-path PATH $prefix/Framework/bin/Linux64
prepend-path PATH $prefix/ansys/bin

# Directories containing University of Sheffield wrapper scripts 
# (/usr/local/packages6/shef/ansys/ and /usr/local/packages6/shef/ansys/batch)
# are not prepended to the path as these are not to be used with Ansys >= 18.2

# Possibly not needed any more; reintroduce if necessary
#prepend-path LD_LIBRARY_PATH /usr/local/packages6/ansys/libs-nvidia-GL

# UoS-specific alias for starting Ansys Workbench
set-alias ansyswb {\$ANSYSROOT/Framework/bin/Linux64/runwb2}
